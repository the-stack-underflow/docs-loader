<!doctype html><html lang=en><!-- Online page at https://ziglang.org/documentation/0.10.0/std/#root;os.windows.WSASocketW --><head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <title>WSASocketW</title> <link href=../../../style.css rel=stylesheet></head> <body class=canvas> <div class=banner> This is a beta autodoc build; expect bugs and missing information.</div> <div class=flex-main> <div id=docs class=flex-right> <div class=wrap> <section class=docs> <div style=position:relative> </div> <div id=sectNav class=""><ul id=listNav><li><a href=../../../std.html class="">std</a></li><li><a href=../../../std/os.html class="">os</a></li><li><a href=../../../std/os/windows.html class="">windows</a></li><li><a href=WSASocketW.html class=active>WSASocketW</a></li></ul></div> <div id=fnProto class=""> <div class=mobile-scroll-container><pre id=fnProtoCode class=scroll-item><a target=_blank href=https://ziglang.org/documentation/0.10.0/std/src/os/windows.zig.html#L1317>WSASocketW</a>(<span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>af: <span class=tok-kw>i32</span>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>socket_type: <span class=tok-kw>i32</span>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>protocol: <span class=tok-kw>i32</span>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>protocolInfo: <span class=tok-kw>?*ws2_32.WSAPROTOCOL_INFOW</span>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>g: <a href=""><span class=tok-kw style=color:#add8e6>ws2_32.GROUP</span></a>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>dwFlags: <a href=""><span class=tok-kw style=color:#add8e6>DWORD</span></a><span class=argBreaker>,<br></span>) !ws2_32.SOCKET</pre></div> </div> <div id=tldDocs class=""><p> Microsoft requires WSAStartup to be called to initialize, or else WSASocketW will return WSANOTINITIALISED. Since this is a standard library, we do not have the luxury of putting initialization code anywhere, because we would not want to pay the cost of calling WSAStartup if there ended up being no networking. Also, if Zig code is used as a library, Zig is not in charge of the start code, and we couldn't put in any initialization code even if we wanted to. The documentation for WSAStartup mentions that there must be a matching WSACleanup call. It is not possible for the Zig Standard Library to honor this for the same reason - there is nowhere to put deinitialization code. So, API users of the zig std lib have two options: <em> (recommended) The simple, cross-platform way: just call <code>WSASocketW</code></em> and don't worry about it. Zig will call WSAStartup() in a thread-safe manner and never deinitialize networking. This is ideal for an application which has the capability to do networking. <em> The getting-your-hands-dirty way: call <code>WSAStartup()</code> before doing</em> networking, so that the error handling code for WSANOTINITIALISED never gets run, which then allows the application or library to call <code>WSACleanup()</code>. This could make sense for a library, which has init and deinit functions for the whole library's lifetime. </p> </div> <div id=sectParams class=""> <a name=//apple_ref/cpp/Section/Parameters class=dashAnchor></a><h2>Parameters</h2> <div id=listParams><div><pre>af: <span class=tok-kw>i32</span>,</pre></div><div><pre>socket_type: <span class=tok-kw>i32</span>,</pre></div><div><pre>protocol: <span class=tok-kw>i32</span>,</pre></div><div><pre>protocolInfo: <span class=tok-kw>?*ws2_32.WSAPROTOCOL_INFOW</span>,</pre></div><div><pre>g: <span class=tok-kw>ws2_32.GROUP</span>,</pre></div><div><pre>dwFlags: <span class=tok-kw>DWORD</span>,</pre></div></div> </div> </section> </div> <div class=flex-filler></div> </div> </div> </body></html>