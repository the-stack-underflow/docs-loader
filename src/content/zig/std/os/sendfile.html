<!doctype html><html lang=en><!-- Online page at https://ziglang.org/documentation/0.10.0/std/#root;os.sendfile --><head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <title>sendfile</title> <link href=../../style.css rel=stylesheet></head> <body class=canvas> <div class=banner> This is a beta autodoc build; expect bugs and missing information.</div> <div class=flex-main> <div id=docs class=flex-right> <div class=wrap> <section class=docs> <div style=position:relative> </div> <div id=sectNav class=""><ul id=listNav><li><a href=../../std.html class="">std</a></li><li><a href=../../std/os.html class="">os</a></li><li><a href=sendfile.html class=active>sendfile</a></li></ul></div> <div id=fnProto class=""> <div class=mobile-scroll-container><pre id=fnProtoCode class=scroll-item><a target=_blank href=https://ziglang.org/documentation/0.10.0/std/src/os.zig.html#L6024>sendfile</a>(<span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>out_fd: <a href=""><span class=tok-kw style=color:#add8e6>fd_t</span></a>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>in_fd: <a href=""><span class=tok-kw style=color:#add8e6>fd_t</span></a>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>in_offset: <span class=tok-kw>u64</span>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>in_len: <span class=tok-kw>u64</span>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>headers: <span class=tok-kw>[]const iovec_const</span>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>trailers: <span class=tok-kw>[]const iovec_const</span>, <span class=argBreaker><br>&nbsp;&nbsp;&nbsp;&nbsp;</span>flags: <span class=tok-kw>u32</span><span class=argBreaker>,<br></span>) SendFileError!<span class=tok-type>usize</span></pre></div> </div> <div id=tldDocs class=""><p> Transfer data between file descriptors, with optional headers and trailers. Returns the number of bytes written, which can be zero. </p> <p> The <code>sendfile</code> call copies <code>in_len</code> bytes from one file descriptor to another. When possible, this is done within the operating system kernel, which can provide better performance characteristics than transferring data from kernel to user space and back, such as with <code>read</code> and <code>write</code> calls. When <code>in_len</code> is <code>0</code>, it means to copy until the end of the input file has been reached. Note, however, that partial writes are still possible in this case. </p> <p> <code>in_fd</code> must be a file descriptor opened for reading, and <code>out_fd</code> must be a file descriptor opened for writing. They may be any kind of file descriptor; however, if <code>in_fd</code> is not a regular file system file, it may cause this function to fall back to calling <code>read</code> and <code>write</code>, in which case atomicity guarantees no longer apply. </p> <p> Copying begins reading at <code>in_offset</code>. The input file descriptor seek position is ignored and not updated. If the output file descriptor has a seek position, it is updated as bytes are written. When <code>in_offset</code> is past the end of the input file, it successfully reads 0 bytes. </p> <p> <code>flags</code> has different meanings per operating system; refer to the respective man pages. </p> <p> These systems support atomically sending everything, including headers and trailers: <em> macOS</em> <em> FreeBSD</em> </p> <p> These systems support in-kernel data copying, but headers and trailers are not sent atomically: <em> Linux</em> </p> <p> Other systems fall back to calling <code>read</code> / <code>write</code>. </p> <p> Linux has a limit on how many bytes may be transferred in one <code>sendfile</code> call, which is <code>0x7ffff000</code> on both 64-bit and 32-bit systems. This is due to using a signed C int as the return value, as well as stuffing the errno codes into the last <code>4096</code> values. This is noted on the <code>sendfile</code> man page. The limit on Darwin is <code>0x7fffffff</code>, trying to write more than that returns EINVAL. The corresponding POSIX limit on this is <code>math.maxInt(isize)</code>. </p> </div> <div id=sectParams class=""> <a name=//apple_ref/cpp/Section/Parameters class=dashAnchor></a><h2>Parameters</h2> <div id=listParams><div><pre>out_fd: <span class=tok-kw>fd_t</span>,</pre></div><div><pre>in_fd: <span class=tok-kw>fd_t</span>,</pre></div><div><pre>in_offset: <span class=tok-kw>u64</span>,</pre></div><div><pre>in_len: <span class=tok-kw>u64</span>,</pre></div><div><pre>headers: <span class=tok-kw>[]const iovec_const</span>,</pre></div><div><pre>trailers: <span class=tok-kw>[]const iovec_const</span>,</pre></div><div><pre>flags: <span class=tok-kw>u32</span>,</pre></div></div> </div> </section> </div> <div class=flex-filler></div> </div> </div> </body></html>